name: Repository Protection Monitor

on:
  push:
    branches: [ main, master ]
  pull_request:
    types: [opened, synchronize, reopened]
  schedule:
    # Run daily at midnight UTC
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  protect:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        
      - name: Check for unauthorized forks
        run: |
          echo "Repository protection check running..."
          echo "Monitoring for unauthorized access attempts"
          
      - name: Validate copyright notices
        run: |
          if [ ! -f "COPYRIGHT" ]; then
            echo "ERROR: COPYRIGHT file missing!"
            exit 1
          fi
          if [ ! -f "LICENSE" ]; then
            echo "ERROR: LICENSE file missing!"
            exit 1
          fi
          echo "Copyright notices validated ✓"
          
      - name: Check for obfuscated files
        run: |
          if [ ! -f "index.html" ] || [ ! -f "script.js" ] || [ ! -f "styles.css" ]; then
            echo "WARNING: Obfuscated files missing!"
          else
            echo "Obfuscated files present ✓"
          fi

